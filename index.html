<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5" />
  <title>乾淨校園我愛我家兒童著色畫比賽官網</title>

  <meta name="description" content="乾淨校園我愛我家兒童著色畫比賽官網｜報名、流程、辦法、獎項與地點資訊" />
  <meta property="og:title" content="乾淨校園我愛我家兒童著色畫比賽官網" />
  <meta property="og:description" content="報名、流程、參加辦法、獎項與地點" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0ea5e9" />

  <style>
    :root{
      --bg:#f6f9fc;
      --card:#fff;
      --text:#0f172a;
      --muted:#475569;
      --brand:#0ea5e9;
      --brand2:#22c55e;
      --border:#e2e8f0;
      --shadow:0 10px 30px rgba(2,8,23,.08);
      --radius:16px;
      --max:960px;
      --header-height:100px;
    }
    *{box-sizing:border-box;margin:0}
    html{scroll-behavior:smooth;scroll-padding-top:var(--header-height)}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
      color:var(--text);
      background:linear-gradient(135deg,rgba(14,165,233,.08)0%,transparent 50%),linear-gradient(225deg,rgba(34,197,94,.06)0%,transparent 50%),var(--bg);
      line-height:1.6;
      padding-bottom:56px;
    }
    @media(min-width:768px){body{padding-bottom:0}}
    a{color:inherit}
    .wrap{max-width:var(--max);margin:0 auto;padding:16px}

    section[id]{scroll-margin-top:var(--header-height)}

    .topbar{
      position:sticky;top:0;z-index:31;
      background:rgba(255,255,255,.95);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      border-bottom:1px solid var(--border);
    }
    .topbar .wrap{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 16px;gap:10px;
    }
    .brand{
      display:flex;align-items:center;gap:8px;
      font-weight:800;font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;flex-shrink:0;
      background:linear-gradient(135deg,var(--brand),var(--brand2));
    }
    #topRegisterBtn{
      padding:6px 12px;font-size:12px;flex-shrink:0;
      transition:opacity .2s,transform .2s;
    }
    #topRegisterBtn.hide{
      opacity:0;
      pointer-events:none;
      transform:scale(.9);
    }

    .navBar{
      position:sticky;top:50px;z-index:30;
      display:flex;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      gap:8px;
      padding:10px 16px;
      background:rgba(255,255,255,.95);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      border-bottom:1px solid var(--border);
      scrollbar-width:none;
    }
    .navBar::-webkit-scrollbar{display:none}
    .navBar a{
      flex-shrink:0;
      padding:8px 14px;
      border-radius:20px;
      font-size:14px;
      font-weight:600;
      text-decoration:none;
      color:var(--muted);
      background:var(--bg);
      border:1px solid var(--border);
      transition:all .15s;
      white-space:nowrap;
    }
    .navBar a:hover,.navBar a:active{
      background:rgba(14,165,233,.1);
      border-color:var(--brand);
      color:var(--brand);
    }

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:6px;
      padding:10px 16px;border-radius:10px;font-size:14px;font-weight:700;
      text-decoration:none;cursor:pointer;border:1px solid var(--border);
      background:var(--card);transition:transform .1s,box-shadow .1s;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.08)}
    .btn:active{transform:scale(.98)}
    .btn.primary{background:linear-gradient(135deg,var(--brand),#38bdf8);color:#fff;border:none}
    .btn.primary:hover{box-shadow:0 8px 20px rgba(14,165,233,.25)}
    .btn.primary:disabled{opacity:0.6;cursor:not-allowed;transform:none}
    .btn.outline{border-color:var(--brand);color:var(--brand);background:rgba(14,165,233,.04)}
    .btn.outline:hover{background:rgba(14,165,233,.1)}
    .btn.sm{padding:8px 12px;font-size:13px}

    .card{
      background:var(--card);border:1px solid var(--border);
      border-radius:var(--radius);box-shadow:var(--shadow);
    }

    header.hero{padding:12px 0}
    .heroCard{padding:16px}
    @media(min-width:768px){.heroCard{padding:24px}}
    .kicker{
      display:inline-block;padding:4px 10px;border-radius:20px;
      font-size:11px;font-weight:700;color:var(--brand);
      background:rgba(14,165,233,.1);
    }
    h1{font-size:22px;line-height:1.3;margin:10px 0 6px}
    @media(min-width:768px){h1{font-size:28px}}
    .sub{color:var(--muted);font-size:13px;margin-bottom:16px}
    .heroGrid{display:grid;gap:16px}
    @media(min-width:768px){.heroGrid{grid-template-columns:1fr 1fr;gap:24px}}

    .posterWrap{text-align:center}
    .poster{
      width:100%;
      max-width:300px;
      height:auto;
      border-radius:10px;
      cursor:zoom-in;
      border:1px solid var(--border);
    }
    @media(min-width:768px){.poster{max-width:100%}}
    .notice{
      margin-top:10px;padding:10px 12px;border-radius:10px;
      background:rgba(14,165,233,.06);border:1px dashed rgba(14,165,233,.2);
      color:var(--muted);font-size:12px;font-weight:600;
      text-align:left;
    }
    .pillRow{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}
    .pillRow .pill:last-child{grid-column:1/-1}
    @media(min-width:480px){.pillRow{grid-template-columns:1fr 1fr 1fr}.pillRow .pill:last-child{grid-column:auto}}
    .pill{
      padding:10px 12px;border-radius:10px;
      background:#fff;border:1px solid var(--border);
    }
    .pill .t{font-size:11px;color:var(--muted);font-weight:600}
    .pill .v{font-size:14px;font-weight:800;margin-top:2px}
    .ctaRow{display:flex;gap:8px;flex-wrap:wrap}

    section{padding:12px 0}
    .secTitle{margin-bottom:12px}
    .secTitle h2{font-size:17px}

    .grid{display:grid;gap:12px}
    .grid2{grid-template-columns:1fr}
    @media(min-width:600px){.grid2{grid-template-columns:1fr 1fr}}
    .grid3{grid-template-columns:1fr}
    @media(min-width:600px){.grid3{grid-template-columns:repeat(3,1fr)}}

    .infoCard{padding:14px}
    .infoCard h3{font-size:15px;margin-bottom:6px}
    .infoCard p{color:var(--muted);font-size:13px}

    .timeline{padding:12px 14px}
    .tlItem{
      display:grid;grid-template-columns:70px 1fr;gap:10px;
      padding:10px 0;border-top:1px solid var(--border);
    }
    .tlItem:first-child{border-top:none}
    .time{font-weight:800;font-size:14px}
    .tlItem .desc{color:var(--muted);font-size:13px}

    .list{padding-left:18px;color:var(--muted);font-size:13px}
    .list li{margin:6px 0}

    details{border-top:1px solid var(--border);padding:12px 0}
    details:first-child{border-top:none}
    summary{
      cursor:pointer;font-weight:700;font-size:14px;
      display:flex;align-items:center;gap:8px;list-style:none;
    }
    summary::-webkit-details-marker{display:none}
    summary::before{content:"＋";color:var(--muted);font-size:12px;width:16px}
    details[open] summary::before{content:"－"}
    details ul{margin:10px 0 0 24px}
    .tag{
      margin-left:auto;padding:2px 8px;border-radius:20px;
      font-size:10px;font-weight:700;
      background:rgba(239,68,68,.1);color:#dc2626;
    }

    .formCard{padding:16px}
    .formGrid{display:grid;gap:14px}
    .field label{display:block;font-size:13px;font-weight:700;margin-bottom:6px}
    .field input,.field select,.field textarea{
      width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;
      font-size:16px;background:#fff;
    }
    @media(min-width:768px){.field input,.field select,.field textarea{font-size:14px}}
    .field input:focus,.field select:focus,.field textarea:focus{
      outline:none;border-color:var(--brand);box-shadow:0 0 0 3px rgba(14,165,233,.1);
    }
    .field input.error,.field select.error{
      border-color:#dc2626;
      box-shadow:0 0 0 3px rgba(239,68,68,.1);
    }
    .field select{
      appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23475569'%3E%3Cpath d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat:no-repeat;background-position:right 12px center;
    }
    .field textarea{min-height:80px;resize:vertical}
    .field small{display:block;margin-top:4px;font-size:12px;color:var(--muted)}
    .field .errorMsg{display:none;margin-top:4px;font-size:12px;color:#dc2626;font-weight:600}
    .field .errorMsg.show{display:block}
    .inlineAlert{
      display:none;margin-top:8px;padding:10px;border-radius:8px;
      background:rgba(239,68,68,.08);border:1px dashed rgba(239,68,68,.3);
      color:#dc2626;font-size:13px;font-weight:600;
    }
    .inlineAlert.show{display:block}
    .progress{
      display:none;margin-top:10px;padding:10px;border-radius:8px;
      background:rgba(14,165,233,.08);color:var(--muted);font-size:13px;
    }
    .progress.show{display:block}

    .registerTips{order:-1}
    @media(min-width:600px){.registerTips{order:0}}

    .modal{
      position:fixed;inset:0;z-index:50;
      display:none;align-items:center;justify-content:center;
      padding:16px;background:rgba(0,0,0,.7);
    }
    .modal.show{display:flex}
    .modalCard{
      width:100%;max-width:600px;background:#fff;border-radius:16px;overflow:hidden;
    }
    .modalTop{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 16px;border-bottom:1px solid var(--border);
    }
    .modalTop .t{font-weight:700}
    .modalImg{width:100%;display:block}

    .fixedCta{
      position:fixed;bottom:0;left:0;right:0;z-index:25;
      display:flex;gap:6px;padding:8px 12px;
      background:rgba(255,255,255,.95);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      border-top:1px solid var(--border);
    }
    .fixedCta .btn{
      flex:1;
      padding:8px 10px;
      font-size:13px;
    }
    @media(min-width:768px){.fixedCta{display:none}}

    footer{padding:24px 0;color:var(--muted);font-size:12px}
    .footCard{padding:14px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:8px}
  </style>
</head>

<body>
  <!-- 頂部 -->
  <div class="topbar">
    <div class="wrap">
      <div class="brand">
        <span class="dot"></span>
        <span id="siteName">乾淨校園著色畫比賽</span>
      </div>
      <a class="btn primary" id="topRegisterBtn" href="#register">立即報名</a>
    </div>
  </div>

  <!-- 導覽列 -->
  <nav class="navBar">
    <a href="#highlights">亮點</a>
    <a href="#schedule">流程</a>
    <a href="#register">報名</a>
    <a href="#rules">辦法</a>
    <a href="#awards">獎項</a>
    <a href="#location">地點</a>
    <a href="#contact">聯絡</a>
  </nav>

  <!-- Hero -->
  <header class="hero">
    <div class="wrap">
      <div class="card heroCard">
        <div class="kicker" id="kicker">現場提供底圖｜11:40 公布並頒獎</div>
        <h1 id="title">乾淨校園「我愛我家」兒童著色畫比賽</h1>
        <p class="sub" id="subtitle">活動資訊、流程與規則都在這裡。請確定能到再報名（額滿即止）。</p>

        <div class="heroGrid">
          <div class="posterWrap">
            <img 
              class="poster" 
              id="posterImg"
              src="./assets/photo.jpg" 
              alt="活動海報（點擊放大）"
              width="600" height="800"
              loading="eager"
            />
            <div class="notice">收件截止：10:30｜公布並頒獎：11:40</div>
          </div>

          <div>
            <div class="pillRow">
              <div class="pill">
                <div class="t">日期</div>
                <div class="v" id="dateText">2026/03/14（六）</div>
              </div>
              <div class="pill">
                <div class="t">時間</div>
                <div class="v" id="timeText">09:00–12:00</div>
              </div>
              <div class="pill">
                <div class="t">地點</div>
                <div class="v" id="placeText">彰南里活動中心</div>
              </div>
            </div>
            <div class="ctaRow">
              <a class="btn primary" href="#register">立即報名</a>
              <a class="btn" id="mapBtnTop" href="#" target="_blank" rel="noopener">開啟地圖</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- 活動亮點 -->
    <section id="highlights">
      <div class="wrap">
        <div class="secTitle"><h2>活動亮點</h2></div>
        <div class="grid grid3">
          <div class="card infoCard">
            <h3>現場提供底圖</h3>
            <p>到場領取底圖即可開始創作。</p>
          </div>
          <div class="card infoCard">
            <h3>流程清楚</h3>
            <p>10:30 收件截止，11:40 公布並頒獎。</p>
          </div>
          <div class="card infoCard">
            <h3>完成就有參加獎</h3>
            <p>參加獎數量有限，送完為止。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 當日流程 -->
    <section id="schedule">
      <div class="wrap">
        <div class="secTitle"><h2>當日流程</h2></div>
        <div class="card timeline">
          <div class="tlItem">
            <div class="time">09:00</div>
            <div class="desc">報到、領取底圖（開始創作）</div>
          </div>
          <div class="tlItem">
            <div class="time">10:30</div>
            <div class="desc">收件截止（作品繳交截止）</div>
          </div>
          <div class="tlItem">
            <div class="time">11:40</div>
            <div class="desc">公布並頒獎</div>
          </div>
          <div class="tlItem">
            <div class="time">12:00</div>
            <div class="desc">活動結束</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 報名 -->
    <section id="register">
      <div class="wrap">
        <div class="secTitle"><h2>報名</h2></div>
        <div class="grid grid2">
          <!-- 提示卡 -->
          <div class="card infoCard registerTips">
            <h3>報名前先看這三點</h3>
            <ul class="list">
              <li><b>名額</b>：幼兒園組 25 人／國小低年級組 25 人（額滿為止）</li>
              <li><b>收件截止</b>：10:30 前繳交作品，逾時不列入評審</li>
              <li><b>家長協助</b>：幼兒園可適度協助但不得代畫；國小低年級不得動手協助</li>
            </ul>
            <div class="notice" style="margin-top:12px">完整規則請看下方「參加辦法」</div>
            <div class="ctaRow" style="margin-top:12px">
              <a class="btn sm" href="#rules">參加辦法</a>
              <a class="btn sm" href="#awards">獎項</a>
              <a class="btn sm" href="#location">地點</a>
            </div>
          </div>

          <!-- 表單 -->
          <div class="card formCard">
            <form id="signupForm" class="formGrid" autocomplete="on">
              <div class="field">
                <label for="full_join">是否能全程參與（必填）</label>
                <select id="full_join" name="是否能全程參與（9:00–12:00）" required>
                  <option value="" selected disabled>請選擇</option>
                  <option value="是（我能全程參與）">是（我能全程參與）</option>
                  <option value="否（我可能無法全程，請先不要報名）">否（我可能無法全程，請先不要報名）</option>
                </select>
                <small>無法全程參與者請勿報名，避免佔用名額。</small>
                <div class="inlineAlert" id="fullJoinAlert">這場活動需要全程參與，若無法配合建議先不要報名。</div>
              </div>

              <div class="field">
                <label for="resident">是否為台南市民（必填）</label>
                <select id="resident" name="是否為台南市民" required>
                  <option value="" selected disabled>請選擇</option>
                  <option value="是">是</option>
                  <option value="否">否</option>
                </select>
                <div class="errorMsg" id="residentError">請選擇是否為台南市民</div>
              </div>

              <div class="field">
                <label for="parent_name">家長姓名（必填）</label>
                <input id="parent_name" name="家長姓名" type="text" required placeholder="例如：王小明" autocomplete="name" />
                <div class="errorMsg" id="parentNameError">請填寫家長姓名</div>
              </div>

              <div class="field">
                <label for="phone">聯絡手機（必填）</label>
                <input id="phone" name="聯絡電話（手機）" type="tel" inputmode="tel" required placeholder="例如：0912345678" autocomplete="tel" />
                <small>請填寫 10 碼手機號碼</small>
                <div class="errorMsg" id="phoneError">請填寫正確的手機號碼（10碼數字）</div>
              </div>

              <div class="field">
                <label for="child_name">孩子姓名（必填）</label>
                <input id="child_name" name="孩子姓名" type="text" required placeholder="例如：小美" />
                <div class="errorMsg" id="childNameError">請填寫孩子姓名</div>
              </div>

              <div class="field">
                <label for="child_age">孩子年級（必填）</label>
                <select id="child_age" name="孩子年級／年齡" required>
                  <option value="" selected disabled>請選擇</option>
                  <option value="幼兒園">幼兒園</option>
                  <option value="國小低年級">國小低年級</option>
                </select>
                <div class="errorMsg" id="childAgeError">請選擇孩子年級</div>
              </div>

              <div class="field">
                <label for="group">參賽組別（必填）</label>
                <select id="group" name="參賽組別" required>
                  <option value="" selected disabled>請選擇</option>
                  <option value="幼兒園組">幼兒園組</option>
                  <option value="國小低年級組（1–2年級）">國小低年級組（1–2年級）</option>
                </select>
                <div class="errorMsg" id="groupError">請選擇參賽組別</div>
              </div>

              <div class="field">
                <label for="school">就讀學校（可填）</label>
                <input id="school" name="就讀學校（選填）" type="text" placeholder="例如：成功國小" />
              </div>

              <div class="field">
                <label for="note">備註（可填）</label>
                <textarea id="note" name="備註" placeholder="例如：需要無障礙動線"></textarea>
              </div>

              <div class="ctaRow">
                <button class="btn primary" id="submitBtn" type="submit">送出報名</button>
              </div>

              <div class="progress" id="progress">送出中…請稍等</div>
              <div class="inlineAlert" id="formError"></div>

              <p style="font-size:12px;color:var(--muted)">填寫資料僅用於活動聯絡，不作其他用途。</p>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- 參加辦法 -->
    <section id="rules">
      <div class="wrap">
        <div class="secTitle">
          <h2>參加辦法</h2>
          <p style="font-size:12px;color:var(--muted);margin-top:4px">點開查看細節</p>
        </div>
        <div class="card" style="padding:12px 16px">
          <details open>
            <summary>參賽組別與資格</summary>
            <ul class="list">
              <li>分兩組：幼兒園組、國小低年級組（1–2 年級）</li>
              <li>每位參賽兒童需由一位家長陪同</li>
            </ul>
          </details>

          <details>
            <summary>名額與額滿規則</summary>
            <ul class="list">
              <li>幼兒園組 25 人、國小低年級組 25 人，額滿為止</li>
              <li>額滿即停止受理（不接受現場加報）</li>
            </ul>
          </details>

          <details>
            <summary>報到與領取底圖</summary>
            <ul class="list">
              <li>09:00 起報到，建議 09:20 前完成報到</li>
              <li>報到後領取主辦提供之著色底圖，即可開始創作</li>
            </ul>
          </details>

          <details>
            <summary>作品規則與收件截止 <span class="tag">重要</span></summary>
            <ul class="list">
              <li>必須使用主辦提供之著色底圖完成作品</li>
              <li>畫材自備（蠟筆／彩色筆／色鉛筆／水彩等皆可）</li>
              <li><b>10:30 前</b>完成並繳交作品；逾時視同放棄評審</li>
            </ul>
          </details>

          <details>
            <summary>家長陪同與協助界線 <span class="tag">最常爭議</span></summary>
            <ul class="list">
              <li><b>幼兒園組</b>：家長可適度協助（口頭提醒、安撫、協助擺放畫具或轉動紙張等），但不得代為上色、描線或補色</li>
              <li><b>國小低年級組</b>：家長可陪同但不得動手協助；違規者取消評審資格</li>
            </ul>
          </details>

          <details>
            <summary>評審與評分方式</summary>
            <ul class="list">
              <li>評審：青草國小 曾文欽 校長</li>
              <li>評分項目：配色與美感、整潔度與完成度、創意表現、主題符合度</li>
              <li>同分處理：以「整潔度與完成度」較佳者優先</li>
            </ul>
          </details>

          <details>
            <summary>獎項（兩組各一套）</summary>
            <ul class="list">
              <li>金獎 1 名：800 元＋獎狀</li>
              <li>銀獎 1 名：500 元＋獎狀</li>
              <li>銅獎 1 名：300 元＋獎狀</li>
              <li>佳作 3 名：200 元＋獎狀</li>
              <li>參加獎：完成作品即可獲得（數量有限，送完為止）</li>
            </ul>
          </details>

          <details>
            <summary>得獎公告與領獎</summary>
            <ul class="list">
              <li>得獎名單現場公布並頒獎（11:40）</li>
              <li>唱名三次未上台者，視同放棄該獎項</li>
              <li>若需代領或補領，請依現場公告與窗口指引辦理</li>
            </ul>
          </details>

          <details>
            <summary>作品發表與影像使用 <span class="tag">重要</span></summary>
            <ul class="list">
              <li>得獎作品將公布於官方渠道（活動宣傳與成果展示）</li>
              <li>主辦單位得就作品進行公開展示、宣傳使用</li>
              <li>活動現場可能拍照/錄影作為活動紀錄與宣傳使用</li>
            </ul>
          </details>

          <details>
            <summary>其他注意事項</summary>
            <ul class="list">
              <li>無全程參與者，取消得獎資格及獎金</li>
              <li>主辦單位保留活動調整之權利，若有變動以現場公告為準</li>
            </ul>
          </details>
        </div>
      </div>
    </section>

    <!-- 獎項 -->
    <section id="awards">
      <div class="wrap">
        <div class="secTitle"><h2>獎項</h2></div>
        <div class="grid grid2">
          <div class="card infoCard">
            <h3>幼兒園組</h3>
            <ul class="list">
              <li>金獎 1 名：<b>800</b> 元＋獎狀</li>
              <li>銀獎 1 名：<b>500</b> 元＋獎狀</li>
              <li>銅獎 1 名：<b>300</b> 元＋獎狀</li>
              <li>佳作 3 名：<b>200</b> 元＋獎狀</li>
            </ul>
          </div>
          <div class="card infoCard">
            <h3>國小低年級組（1–2 年級）</h3>
            <ul class="list">
              <li>金獎 1 名：<b>800</b> 元＋獎狀</li>
              <li>銀獎 1 名：<b>500</b> 元＋獎狀</li>
              <li>銅獎 1 名：<b>300</b> 元＋獎狀</li>
              <li>佳作 3 名：<b>200</b> 元＋獎狀</li>
            </ul>
          </div>
        </div>
        <div class="notice" style="margin-top:12px">參加獎：完成作品即可獲得（數量有限，送完為止）</div>
      </div>
    </section>

    <!-- 地點 -->
    <section id="location">
      <div class="wrap">
        <div class="secTitle"><h2>地點</h2></div>
        <div class="card infoCard">
          <h3>活動地點</h3>
          <p style="font-weight:800;color:var(--text);font-size:16px;margin-bottom:4px" id="placeFull">彰南里活動中心｜大禮堂</p>
          <p style="font-size:14px" id="addressText">臺南市南區新建路 12 號</p>
          <div class="ctaRow" style="margin-top:14px">
            <button class="btn sm" id="copyAddrBtn" type="button">複製地址</button>
            <a class="btn sm primary" id="mapBtn2" href="#" target="_blank" rel="noopener">開啟 Google 地圖</a>
          </div>
          <div class="notice" style="margin-top:14px">建議提早到場，避免卡到 10:30 收件截止</div>
        </div>
      </div>
    </section>

    <!-- 聯絡 -->
    <section id="contact">
      <div class="wrap">
        <div class="secTitle"><h2>主辦／協辦／聯絡</h2></div>
        <div class="card infoCard">
          <div class="grid grid2">
            <div>
              <h3>主辦單位</h3>
              <p id="hostText">乾淨校園推廣團隊</p>
              <h3 style="margin-top:12px">協辦單位</h3>
              <p id="cohostText">彰南里活動中心</p>
            </div>
            <div>
              <h3>洽詢電話</h3>
              <p style="font-size:16px;font-weight:800;color:var(--text)" id="phoneText">陳小姐｜0913-837-389</p>
              <h3 style="margin-top:12px">提醒</h3>
              <p>若臨時無法到場，建議盡早通知，讓名額留給需要的家庭。</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="wrap">
        <div class="card footCard">
          <div style="font-weight:800">乾淨校園我愛我家兒童著色畫比賽官網</div>
          <div>© <span id="year"></span></div>
        </div>
      </div>
    </footer>
  </main>

  <!-- 底部固定按鈕 -->
  <div class="fixedCta">
    <a class="btn primary" href="#register">立即報名</a>
    <a class="btn outline" href="tel:0913837389">撥打電話</a>
  </div>

  <!-- 海報 Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTop">
        <span class="t">活動海報</span>
        <button class="btn sm" id="closeModal" type="button">關閉</button>
      </div>
      <img class="modalImg" id="modalImg" src="./assets/photo.jpg" alt="活動海報" loading="lazy" />
    </div>
  </div>

  <script>
    // ====== 設定 ======
    const GAS_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbxDlJ8o8unlRefrLvJM22lPN7E4Z-TevdkT2Lq1O9ROunLKSVKliq8qylOo_jj-FyyDzQ/exec";
    const THANKS_URL = "https://rogerfang2024.github.io/TN-GJWPAINT/thanks.html";
    const EVENT_CODE = "GJC2026";
    const EVENT_NAME = "乾淨校園我愛我家兒童著色畫比賽";

    const EVENT = {
      siteName: "乾淨校園著色畫比賽",
      fullSiteName: "乾淨校園我愛我家兒童著色畫比賽官網",
      title: "乾淨校園「我愛我家」兒童著色畫比賽",
      kicker: "現場提供底圖｜11:40 公布並頒獎",
      subtitle: "活動資訊、流程與規則都在這裡。請確定能到再報名（額滿即止）。",
      dateText: "2026/03/14（六）",
      timeText: "09:00–12:00",
      place: "彰南里活動中心",
      placeFull: "彰南里活動中心｜大禮堂",
      address: "臺南市南區新建路 12 號",
      mapQuery: "臺南市南區新建路 12 號 彰南里活動中心",
      host: "乾淨校園推廣團隊",
      cohost: "彰南里活動中心",
      phone: "陳小姐｜0913-837-389"
    };

    // ====== 初始化 ======
    const $ = id => document.getElementById(id);

    $("siteName").textContent = EVENT.siteName;
    $("title").textContent = EVENT.title;
    $("kicker").textContent = EVENT.kicker;
    $("subtitle").textContent = EVENT.subtitle;
    $("dateText").textContent = EVENT.dateText;
    $("timeText").textContent = EVENT.timeText;
    $("placeText").textContent = EVENT.place;
    $("placeFull").textContent = EVENT.placeFull;
    $("addressText").textContent = EVENT.address;
    $("hostText").textContent = EVENT.host;
    $("cohostText").textContent = EVENT.cohost;
    $("phoneText").textContent = EVENT.phone;
    $("year").textContent = new Date().getFullYear();

    // 地圖連結
    const mapUrl = "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(EVENT.mapQuery);
    $("mapBtnTop").href = mapUrl;
    $("mapBtn2").href = mapUrl;

    // ====== 頂部報名按鈕：滾到報名區就隱藏 ======
    const topRegisterBtn = $("topRegisterBtn");
    const registerSection = $("register");

    const checkRegisterVisible = () => {
      const rect = registerSection.getBoundingClientRect();
      if (rect.top < window.innerHeight * 0.7) {
        topRegisterBtn.classList.add("hide");
      } else {
        topRegisterBtn.classList.remove("hide");
      }
    };

    window.addEventListener("scroll", checkRegisterVisible, { passive: true });
    checkRegisterVisible();

    // ====== 複製地址 ======
    $("copyAddrBtn").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(EVENT.address);
        $("copyAddrBtn").textContent = "已複製 ✓";
        setTimeout(() => $("copyAddrBtn").textContent = "複製地址", 1500);
      } catch (e) {
        const ta = document.createElement("textarea");
        ta.value = EVENT.address;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        $("copyAddrBtn").textContent = "已複製 ✓";
        setTimeout(() => $("copyAddrBtn").textContent = "複製地址", 1500);
      }
    });

    // ====== Modal ======
    const modal = $("modal");
    const openModal = () => { modal.classList.add("show"); document.body.style.overflow = "hidden"; };
    const closeModalFn = () => { modal.classList.remove("show"); document.body.style.overflow = ""; };

    $("posterImg").addEventListener("click", openModal);
    $("closeModal").addEventListener("click", closeModalFn);
    modal.addEventListener("click", e => { if (e.target === modal) closeModalFn(); });
    document.addEventListener("keydown", e => { if (e.key === "Escape") closeModalFn(); });

    // ====== 表單驗證與送出 ======
    const form = $("signupForm");
    const fullJoin = $("full_join");
    const submitBtn = $("submitBtn");

    // 清除所有錯誤狀態
    const clearErrors = () => {
      document.querySelectorAll(".field input, .field select").forEach(el => {
        el.classList.remove("error");
      });
      document.querySelectorAll(".errorMsg").forEach(el => {
        el.classList.remove("show");
      });
      $("formError").classList.remove("show");
      $("fullJoinAlert").classList.remove("show");
    };

    // 顯示特定欄位錯誤
    const showFieldError = (fieldId, errorId) => {
      $(fieldId).classList.add("error");
      $(errorId).classList.add("show");
    };

    // 全程參與選擇變更
    fullJoin.addEventListener("change", () => {
      const isNo = (fullJoin.value || "").startsWith("否");
      $("fullJoinAlert").classList.toggle("show", isNo);
    });

    // 驗證表單
    const validateForm = () => {
      clearErrors();
      let isValid = true;
      let firstErrorField = null;

      // 1. 全程參與
      if (!fullJoin.value) {
        showFieldError("full_join", "fullJoinAlert");
        isValid = false;
        firstErrorField = firstErrorField || fullJoin;
      } else if (fullJoin.value.startsWith("否")) {
        $("fullJoinAlert").classList.add("show");
        isValid = false;
        firstErrorField = firstErrorField || fullJoin;
      }

      // 2. 台南市民
      if (!$("resident").value) {
        showFieldError("resident", "residentError");
        isValid = false;
        firstErrorField = firstErrorField || $("resident");
      }

      // 3. 家長姓名
      if (!$("parent_name").value.trim()) {
        showFieldError("parent_name", "parentNameError");
        isValid = false;
        firstErrorField = firstErrorField || $("parent_name");
      }

      // 4. 手機（10碼數字）
      const phoneValue = $("phone").value.replace(/\D/g, "");
      if (phoneValue.length < 10) {
        showFieldError("phone", "phoneError");
        isValid = false;
        firstErrorField = firstErrorField || $("phone");
      }

      // 5. 孩子姓名
      if (!$("child_name").value.trim()) {
        showFieldError("child_name", "childNameError");
        isValid = false;
        firstErrorField = firstErrorField || $("child_name");
      }

      // 6. 孩子年級
      if (!$("child_age").value) {
        showFieldError("child_age", "childAgeError");
        isValid = false;
        firstErrorField = firstErrorField || $("child_age");
      }

      // 7. 參賽組別
      if (!$("group").value) {
        showFieldError("group", "groupError");
        isValid = false;
        firstErrorField = firstErrorField || $("group");
      }

      // 捲動到第一個錯誤欄位
      if (firstErrorField) {
        firstErrorField.scrollIntoView({ behavior: "smooth", block: "center" });
        firstErrorField.focus();
      }

      return isValid;
    };

    // 重置表單狀態
    const resetFormState = () => {
      submitBtn.disabled = false;
      submitBtn.textContent = "送出報名";
      $("progress").classList.remove("show");
    };

    // 產生報名序號
    const makeRegId = () => {
      const d = new Date();
      const pad = n => String(n).padStart(2, "0");
      return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}-${Math.floor(Math.random() * 9000) + 1000}`;
    };

    // 取得追蹤參數
    const getTracking = () => {
      const p = new URLSearchParams(location.search);
      const keys = ["src", "utm_source", "utm_medium", "utm_campaign"];
      const parts = keys.map(k => p.get(k)).filter(Boolean).map((v, i) => `${keys[i]}=${v}`);
      return parts.length ? `【來源】${parts.join("&")}` : "";
    };

    // 表單送出（使用 fetch no-cors）
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      // 驗證
      if (!validateForm()) {
        return;
      }

      // 更新 UI
      submitBtn.disabled = true;
      submitBtn.textContent = "送出中…";
      $("progress").classList.add("show");
      $("formError").classList.remove("show");

      // 產生報名序號
      const regId = makeRegId();

      // 組裝資料
      const formData = new URLSearchParams();
      formData.append("活動代碼", EVENT_CODE);
      formData.append("活動名稱", EVENT_NAME);
      formData.append("報名序號", regId);
      formData.append("家長姓名", $("parent_name").value.trim());
      formData.append("聯絡電話（手機）", $("phone").value.trim());
      formData.append("孩子姓名", $("child_name").value.trim());
      formData.append("孩子年級／年齡", $("child_age").value);
      formData.append("參賽組別", $("group").value);
      formData.append("是否能全程參與（9:00–12:00）", $("full_join").value);
      formData.append("就讀學校（選填）", $("school").value.trim());
      formData.append("是否為台南市民", $("resident").value);
      
      // 備註與追蹤
      const userNote = ($("note").value || "").trim();
      const tracking = getTracking();
      const note = tracking ? (userNote ? `${userNote} ｜${tracking}` : tracking) : userNote;
      formData.append("備註", note);
      formData.append("追蹤", tracking);

      try {
        // 使用 no-cors 模式送出（不會收到回應內容，但資料會送出）
        await fetch(GAS_WEBAPP_URL, {
          method: "POST",
          mode: "no-cors",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded"
          },
          body: formData.toString()
        });

        // no-cors 模式下無法得知是否成功，但通常會成功
        // 清除表單並跳轉
        form.reset();
        window.location.href = `${THANKS_URL}?rid=${encodeURIComponent(regId)}`;

      } catch (err) {
        // 失敗：顯示錯誤並重置按鈕
        $("formError").textContent = "送出失敗，請稍後再試";
        $("formError").classList.add("show");
        resetFormState();
      }
    });
  </script>
</body>
</html>

