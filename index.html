<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>乾淨世界我愛我家兒童著色畫比賽官網</title>

  <meta name="description" content="乾淨世界我愛我家兒童著色畫比賽官網｜報名、流程、辦法、獎項與地點資訊" />
  <meta property="og:title" content="乾淨世界我愛我家兒童著色畫比賽官網" />
  <meta property="og:description" content="一頁式活動官網：報名、流程、參加辦法（可展開）、獎項與地點" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0ea5e9" />

  <style>
    :root{
      --bg:#f6f9fc;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --brand:#0ea5e9;
      --brand2:#22c55e;
      --border:#e2e8f0;
      --shadow: 0 10px 30px rgba(2, 8, 23, .08);
      --radius: 18px;
      --max: 980px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial;
      color:var(--text);
      background:
        radial-gradient(900px 400px at 15% -10%, rgba(14,165,233,.14), transparent 60%),
        radial-gradient(900px 420px at 100% 10%, rgba(34,197,94,.10), transparent 55%),
        var(--bg);
      line-height:1.6;
    }
    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:22px}

    .topbar{
      position:sticky; top:0; z-index:30;
      backdrop-filter: blur(10px);
      background: rgba(246,249,252,.80);
      border-bottom:1px solid rgba(226,232,240,.85);
    }
    .topbar .wrap{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 22px;
      gap:10px;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      font-weight:900;
      letter-spacing:.3px;
      font-size:14px;
      white-space:nowrap;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background:linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow: 0 6px 18px rgba(14,165,233,.20);
      flex:0 0 auto;
    }
    nav{display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end}
    nav a{
      text-decoration:none;
      font-size:13px;
      color:var(--muted);
      padding:7px 9px;
      border-radius:999px;
    }
    nav a:hover{background:rgba(14,165,233,.10); color:var(--text)}
    @media (max-width: 900px){
      nav{display:none}
    }

    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px;
      border:1px solid var(--border);
      background: var(--card);
      padding:10px 12px;
      border-radius:12px;
      text-decoration:none;
      font-weight:800;
      cursor:pointer;
      transition: transform .06s ease, box-shadow .06s ease, background .2s ease, opacity .2s ease;
      font-size:14px;
    }
    .btn:hover{transform: translateY(-1px); box-shadow: 0 12px 24px rgba(2,8,23,.08)}
    .btn.primary{
      border-color: transparent;
      background: linear-gradient(135deg, var(--brand), #38bdf8);
      color: #fff;
    }
    .btn.primary:hover{box-shadow: 0 18px 40px rgba(14,165,233,.22)}
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    header.hero{padding:18px 0 8px}
    .heroCard{padding:20px}

    .kicker{
      display:inline-flex;
      gap:10px;
      align-items:center;
      font-size:12px;
      color:var(--muted);
      background: rgba(14,165,233,.08);
      border:1px solid rgba(14,165,233,.16);
      padding:6px 10px;
      border-radius:999px;
      font-weight:800;
    }

    h1{
      margin:12px 0 8px;
      font-size: 28px;
      line-height:1.22;
      letter-spacing:.2px;
    }
    @media (max-width: 520px){
      h1{font-size:24px}
    }

    .sub{
      margin:0 0 14px;
      color:var(--muted);
      font-size:14px;
      font-weight:650;
    }

    .heroLayout{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:12px;
      align-items:start;
    }
    @media (max-width: 900px){
      .heroLayout{grid-template-columns:1fr}
    }

    .poster{
      width:100%;
      border-radius:16px;
      border:1px solid var(--border);
      background:#fff;
      display:block;
      cursor:zoom-in;
    }

    .pillRow{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin:0 0 12px;
    }
    .pill{
      border:1px solid var(--border);
      background: #fff;
      border-radius: 14px;
      padding:10px 12px;
    }
    .pill .t{font-size:12px; color:var(--muted); font-weight:800}
    .pill .v{font-size:15px; font-weight:900; margin-top:2px}

    .ctaRow{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 10px;
      align-items:center;
    }

    .notice{
      margin-top:12px;
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(2,8,23,.18);
      background: rgba(2,8,23,.03);
      color:var(--muted);
      font-size:13px;
      font-weight:700;
    }

    section{padding:14px 0}
    .secTitle{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
      margin: 8px 0 10px;
    }
    .secTitle h2{
      margin:0;
      font-size:18px;
      letter-spacing:.2px;
    }
    .secTitle .hint{
      color:var(--muted);
      font-size:12px;
      font-weight:650;
    }

    .grid{display:grid; gap:12px}
    .cards3{grid-template-columns: repeat(3, 1fr)}
    @media (max-width: 900px){
      .cards3{grid-template-columns: 1fr}
    }
    .twoCol{grid-template-columns: 1fr 1fr; align-items:start}
    @media (max-width: 900px){
      .twoCol{grid-template-columns:1fr}
    }

    .infoCard{padding:14px}
    .infoCard h3{margin:0 0 6px; font-size:15px}
    .infoCard p{margin:0; color:var(--muted); font-size:13px; font-weight:650}

    .timeline{padding: 10px 14px 14px}
    .tlItem{
      display:grid;
      grid-template-columns: 98px 1fr;
      gap:12px;
      padding:10px 0;
      border-top:1px solid var(--border);
    }
    .tlItem:first-child{border-top:none}
    .time{
      font-family: var(--mono);
      font-weight:900;
      color:#0b1220;
      font-size:13px;
    }
    .tlItem .desc{
      color:var(--muted);
      font-size:13px;
      font-weight:700;
    }

    .list{margin:0; padding-left:18px; color:var(--muted); font-weight:700; font-size:13px}
    .list li{margin:7px 0}

    details{border-top:1px solid var(--border); padding:10px 0}
    details:first-child{border-top:none}
    summary{
      cursor:pointer;
      list-style:none;
      font-weight:900;
      padding:4px 0;
      font-size:14px;
    }
    summary::-webkit-details-marker{display:none}
    details p, details ul{margin:6px 0 0; color:var(--muted); font-weight:700; font-size:13px}
    .tag{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:2px 8px;
      border-radius:999px;
      font-size:11px;
      font-weight:900;
      border:1px solid rgba(244,63,94,.25);
      background: rgba(244,63,94,.08);
      color:#9f1239;
      margin-left:8px;
      vertical-align:middle;
    }

    .mapBox{
      border:1px solid var(--border);
      border-radius: 16px;
      overflow:hidden;
      background:#fff;
    }
    iframe{width:100%; height:300px; border:0}

    .muted{color:var(--muted)}

    .linkBox{
      border:1px solid var(--border);
      background:#fff;
      border-radius:14px;
      padding:12px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:space-between;
    }
    .linkText{
      font-family: var(--mono);
      font-size:12px;
      color:#0b1220;
      font-weight:900;
      word-break:break-all;
      text-decoration:none;
    }
    .linkText:hover{ text-decoration:underline; }

    /* 表單 */
    .formGrid{display:grid; gap:12px}
    .field label{display:block; font-weight:900; font-size:13px; margin-bottom:6px}
    .field input, .field select, .field textarea{
      width:100%;
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
      background:#fff;
      outline:none;
    }
    .field textarea{min-height:90px; resize:vertical}
    .field small{display:block; margin-top:6px; color:var(--muted); font-weight:650; font-size:12px}
    .inlineAlert{
      display:none;
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(244,63,94,.35);
      background: rgba(244,63,94,.06);
      color:#9f1239;
      font-weight:900;
      font-size:13px;
    }
    .inlineAlert.show{display:block}

    .progress{
      display:none;
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(14,165,233,.20);
      background: rgba(14,165,233,.06);
      color: var(--muted);
      font-weight:800;
      font-size:13px;
    }
    .progress.show{display:block}

    /* 海報放大 */
    .modal{
      position:fixed; inset:0;
      background: rgba(2,8,23,.60);
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal.show{display:flex}
    .modalCard{
      max-width: 980px;
      width: 100%;
      border-radius: 18px;
      overflow:hidden;
      background:#fff;
      border:1px solid rgba(226,232,240,.9);
      box-shadow: 0 30px 80px rgba(2,8,23,.35);
    }
    .modalTop{
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px;
      border-bottom:1px solid var(--border);
    }
    .modalTop .t{font-weight:900}
    .modalImg{width:100%; display:block}
    .iconBtn{
      border:1px solid var(--border);
      background:#fff;
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:900;
    }

    footer{padding:18px 0 36px; color:var(--muted); font-size:12px}
    .footCard{
      padding:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="wrap">
      <div class="brand" aria-label="網站標題">
        <span class="dot" aria-hidden="true"></span>
        <span id="siteName">乾淨世界我愛我家兒童著色畫比賽官網</span>
      </div>

      <nav aria-label="導覽">
        <a href="#highlights">亮點</a>
        <a href="#schedule">流程</a>
        <a href="#register">報名</a>
        <a href="#rules">辦法</a>
        <a href="#awards">獎項</a>
        <a href="#location">地點</a>
        <a href="#contact">聯絡</a>
      </nav>

      <a class="btn primary" href="#register">報名</a>
    </div>
  </div>

  <header class="hero">
    <div class="wrap">
      <div class="card heroCard">
        <div class="kicker" id="kicker">現場提供底圖｜11:40 公布並頒獎</div>
        <h1 id="title">乾淨世界「我愛我家」兒童著色畫比賽</h1>
        <p class="sub" id="subtitle">一頁式活動官網：報名、流程、參加辦法（可展開）、獎項與地點。請確定能到再報名。</p>

        <div class="heroLayout">
          <div>
            <img class="poster" id="posterImg" src="assets/photo.png" alt="活動海報（點擊可放大）" loading="lazy" />
            <div class="notice">收件截止：10:30（作品繳交截止）｜公布並頒獎：11:40</div>
          </div>

          <div>
            <div class="pillRow" aria-label="活動關鍵資訊">
              <div class="pill">
                <div class="t">日期</div>
                <div class="v" id="dateText">2026/03/15（日）</div>
              </div>
              <div class="pill">
                <div class="t">時間</div>
                <div class="v" id="timeText">09:00–12:00</div>
              </div>
              <div class="pill">
                <div class="t">地點</div>
                <div class="v" id="placeText">彰南里活動中心｜大禮堂</div>
              </div>
            </div>

            <div class="ctaRow">
              <a class="btn primary" href="#register">立即報名</a>
              <a class="btn" id="mapBtnTop" href="#" target="_blank" rel="noopener">開啟地圖</a>
            </div>

            <div style="height:10px"></div>

            <div class="linkBox" role="group" aria-label="報名網址">
              <div class="muted" style="font-weight:900; font-size:13px">報名網址（可點）</div>
              <a class="linkText" id="regUrlText" href="#" target="_blank" rel="noopener">（尚未設定）</a>
              <button class="btn" id="copyLinkBtn" type="button">複製報名網址</button>
            </div>

            <div class="muted" style="font-weight:800; font-size:12px; margin-top:10px">
              填寫資料僅用於活動聯絡，不作其他用途。
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="highlights">
      <div class="wrap">
        <div class="secTitle">
          <h2>活動亮點</h2>
          <div class="hint">簡短、好讀</div>
        </div>

        <div class="grid cards3">
          <div class="card infoCard">
            <h3>現場提供底圖</h3>
            <p>到場領取底圖即可開始創作。</p>
          </div>
          <div class="card infoCard">
            <h3>流程清楚</h3>
            <p>10:30 收件截止，11:40 公布並頒獎。</p>
          </div>
          <div class="card infoCard">
            <h3>完成就有參加獎</h3>
            <p>參加獎數量有限，送完為止。</p>
          </div>
        </div>
      </div>
    </section>

    <section id="schedule">
      <div class="wrap">
        <div class="secTitle">
          <h2>當日流程</h2>
          <div class="hint">一目了然</div>
        </div>

        <div class="card timeline">
          <div class="tlItem">
            <div class="time">09:00</div>
            <div class="desc">報到、領取底圖（開始創作）</div>
          </div>
          <div class="tlItem">
            <div class="time">10:30</div>
            <div class="desc">收件截止（作品繳交截止）</div>
          </div>
          <div class="tlItem">
            <div class="time">11:40</div>
            <div class="desc">公布並頒獎</div>
          </div>
          <div class="tlItem">
            <div class="time">12:00</div>
            <div class="desc">活動結束</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 報名（左表單、右重點三行） -->
    <section id="register">
      <div class="wrap">
        <div class="secTitle">
          <h2>報名</h2>
          <div class="hint">按鈕＋網址都可用（不使用 QR）</div>
        </div>

        <div class="grid twoCol">
          <!-- 左：表單 -->
          <div class="card infoCard">
            <form id="signupForm" class="formGrid" autocomplete="on">
              <!-- 固定欄位（給 GAS / Sheet） -->
              <input type="hidden" name="活動代碼" id="event_code" />
              <input type="hidden" name="活動名稱" id="event_name" />
              <input type="hidden" name="報名序號" id="reg_id" />
              <input type="hidden" name="備註" id="note_hidden" />
              <input type="hidden" name="redirect" id="redirect_url" />

              <div class="field">
                <label for="full_join">是否能全程參與（必填）</label>
                <select id="full_join" name="是否能全程參與" required>
                  <option value="" selected disabled>請選擇</option>
                  <option>是（我能全程參與）</option>
                  <option>否（我可能無法全程，請先不要報名）</option>
                </select>
                <small>為避免佔名額，無法全程參與者請勿報名。</small>
                <div class="inlineAlert" id="fullJoinAlert">這場活動需要全程參與：若你可能無法全程，建議先不要報名，謝謝你。</div>
              </div>

              <div class="field">
                <label for="resident">是否為臺南市民（必填）</label>
                <select id="resident" name="是否為臺南市民" required>
                  <option value="" selected disabled>請選擇</option>
                  <option>是</option>
                  <option>否</option>
                </select>
              </div>

              <div class="field">
                <label for="parent_name">家長姓名（必填）</label>
                <input id="parent_name" name="家長姓名" type="text" required placeholder="例如：王小明" />
              </div>

              <div class="field">
                <label for="phone">聯絡手機（必填）</label>
                <input id="phone" name="聯絡手機" type="tel" inputmode="tel" required placeholder="例如：0912-345-678" />
              </div>

              <div class="field">
                <label for="child_name">孩子姓名（必填）</label>
                <input id="child_name" name="孩子姓名" type="text" required placeholder="例如：小美" />
              </div>

              <div class="field">
                <label for="group">參賽組別（必填）</label>
                <select id="group" name="參賽組別" required>
                  <option value="" selected disabled>請選擇</option>
                  <option>幼兒園組</option>
                  <option>國小低年級組（1–2年級）</option>
                </select>
              </div>

              <div class="field">
                <label for="school">就讀學校（可填）</label>
                <input id="school" name="就讀學校" type="text" placeholder="例如：成功國小" />
              </div>

              <div class="field">
                <label for="note">備註（可填）</label>
                <textarea id="note" name="備註（家長）" placeholder="例如：需要無障礙動線 / 其他提醒"></textarea>
              </div>

              <div class="ctaRow" style="margin-top:4px">
                <button class="btn primary" id="submitBtn" type="submit">送出報名</button>
                <span class="muted" id="submitHint" style="font-weight:900; font-size:13px"></span>
              </div>

              <div class="progress" id="progress">送出中…請稍等（寫入成功才會顯示完成頁）</div>

              <div class="muted" style="font-weight:800; font-size:12px; margin-top:6px">
                填寫資料僅用於活動聯絡，不作其他用途。
              </div>
            </form>
          </div>

          <!-- 右：重點三行 + 快速連結 -->
          <div class="card infoCard">
            <h3>報名前先看這三點</h3>
            <ul class="list">
              <li><b>名額</b>：幼兒園組 25 人／國小低年級組 25 人（額滿為止）</li>
              <li><b>收件截止</b>：10:30 前繳交作品，逾時不列入評審</li>
              <li><b>家長協助</b>：幼兒園可適度協助但不得代畫；國小低年級不得動手協助（違規取消評審資格）</li>
            </ul>

            <div class="notice" style="margin-top:12px">
              想看完整規則：請往下到「參加辦法」區塊（可展開）。
            </div>

            <div class="ctaRow" style="margin-top:12px">
              <a class="btn" href="#rules">查看參加辦法</a>
              <a class="btn" href="#awards">查看獎項</a>
              <a class="btn" href="#location">查看地點</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 參加辦法（折疊） -->
    <section id="rules">
      <div class="wrap">
        <div class="secTitle">
          <h2>參加辦法（點開查看）</h2>
          <div class="hint">先看重點，需要再展開</div>
        </div>

        <div class="card" style="padding:10px 14px">
          <details open>
            <summary>參賽組別與資格</summary>
            <ul class="list">
              <li>分兩組：幼兒園組、國小低年級組（1–2 年級）。</li>
              <li>每位參賽兒童需由一位家長陪同。</li>
            </ul>
          </details>

          <details>
            <summary>名額與額滿規則</summary>
            <ul class="list">
              <li>幼兒園組 25 人、國小低年級組 25 人，額滿為止。</li>
              <li>額滿即停止受理（不接受現場加報）。</li>
            </ul>
          </details>

          <details>
            <summary>報到與領取底圖</summary>
            <ul class="list">
              <li>09:00 起報到，建議 09:20 前完成報到。</li>
              <li>報到後領取主辦提供之著色底圖，即可開始創作。</li>
            </ul>
          </details>

          <details>
            <summary>作品規則與收件截止<span class="tag">重要</span></summary>
            <ul class="list">
              <li>必須使用主辦提供之著色底圖完成作品。</li>
              <li>畫材自備（蠟筆／彩色筆／色鉛筆／水彩等皆可）。</li>
              <li><b>10:30 前</b>完成並繳交作品；逾時視同放棄評審。</li>
            </ul>
          </details>

          <details>
            <summary>家長陪同與協助界線<span class="tag">最常爭議</span></summary>
            <ul class="list">
              <li><b>幼兒園組</b>：家長可適度協助（口頭提醒、安撫、協助擺放畫具或轉動紙張等），但不得代為上色、描線或補色。</li>
              <li><b>國小低年級組</b>：家長可陪同但不得動手協助；違規者取消評審資格。</li>
            </ul>
          </details>

          <details>
            <summary>評審與評分方式</summary>
            <ul class="list">
              <li>評審：青草國小 曾文欽 校長。</li>
              <li>評分項目：配色與美感、整潔度與完成度、創意表現、主題符合度。</li>
              <li>同分處理：以「整潔度與完成度」較佳者優先。</li>
            </ul>
          </details>

          <details>
            <summary>獎項（兩組各一套）</summary>
            <ul class="list">
              <li>金獎 1 名：<b>800</b> 元＋獎狀</li>
              <li>銀獎 1 名：<b>500</b> 元＋獎狀</li>
              <li>銅獎 1 名：<b>300</b> 元＋獎狀</li>
              <li>佳作 3 名：<b>200</b> 元＋獎狀</li>
              <li>參加獎：完成作品即可獲得（數量有限，送完為止）</li>
            </ul>
          </details>

          <details>
            <summary>得獎公告與領獎</summary>
            <ul class="list">
              <li>得獎名單現場公布並頒獎（11:40）。</li>
              <li>唱名三次未上台者，視同放棄該獎項。</li>
              <li>若需代領或補領，請依現場公告與窗口指引辦理。</li>
            </ul>
          </details>

          <details>
            <summary>作品發表、著作權與影像使用<span class="tag">重要</span></summary>
            <ul class="list">
              <li>得獎作品將公布於官方渠道（活動宣傳與成果展示）。</li>
              <li>主辦單位得就作品進行公開展示、宣傳使用（以活動推廣為目的）。</li>
              <li>活動現場可能拍照/錄影作為活動紀錄與宣傳使用。</li>
            </ul>
          </details>

          <details>
            <summary>其他注意事項</summary>
            <ul class="list">
              <li>無全程參與者，取消得獎資格及獎金。</li>
              <li>主辦單位保留活動調整之權利，若有變動以現場公告為準。</li>
            </ul>
          </details>
        </div>
      </div>
    </section>

    <!-- 獎項卡片（A：分兩張卡） -->
    <section id="awards">
      <div class="wrap">
        <div class="secTitle">
          <h2>獎項</h2>
          <div class="hint">兩組各一套（看組別不會看錯）</div>
        </div>

        <div class="grid twoCol">
          <div class="card infoCard">
            <h3>幼兒園組</h3>
            <ul class="list">
              <li>金獎 1 名：<b>800</b> 元＋獎狀</li>
              <li>銀獎 1 名：<b>500</b> 元＋獎狀</li>
              <li>銅獎 1 名：<b>300</b> 元＋獎狀</li>
              <li>佳作 3 名：<b>200</b> 元＋獎狀</li>
            </ul>
          </div>

          <div class="card infoCard">
            <h3>國小低年級組（1–2 年級）</h3>
            <ul class="list">
              <li>金獎 1 名：<b>800</b> 元＋獎狀</li>
              <li>銀獎 1 名：<b>500</b> 元＋獎狀</li>
              <li>銅獎 1 名：<b>300</b> 元＋獎狀</li>
              <li>佳作 3 名：<b>200</b> 元＋獎狀</li>
            </ul>
          </div>
        </div>

        <div class="notice" style="margin-top:12px">
          參加獎：完成作品即可獲得（數量有限，送完為止）。
        </div>
      </div>
    </section>

    <section id="location">
      <div class="wrap">
        <div class="secTitle">
          <h2>地點</h2>
          <div class="hint">地址可複製、可直接開地圖</div>
        </div>

        <div class="grid twoCol">
          <div class="card infoCard">
            <h3>活動地點</h3>
            <p class="muted" style="font-weight:900" id="placeFull">彰南里活動中心｜大禮堂</p>
            <p class="muted" style="font-weight:900; margin-top:8px" id="addressText">臺南市南區新建路 12 號</p>

            <div class="ctaRow" style="margin-top:12px">
              <button class="btn" id="copyAddrBtn" type="button">複製地址</button>
              <a class="btn primary" id="mapBtn2" href="#" target="_blank" rel="noopener">用 Google 地圖開啟</a>
            </div>

            <div class="notice" style="margin-top:12px">
              建議提早到場，避免卡到 10:30 收件截止。
            </div>
          </div>

          <div class="mapBox">
            <iframe
              id="mapFrame"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src=""
              title="Google 地圖">
            </iframe>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="wrap">
        <div class="secTitle">
          <h2>主辦 / 協辦 / 聯絡</h2>
          <div class="hint">如需取消/更改，請聯絡窗口</div>
        </div>

        <div class="card infoCard">
          <div class="grid twoCol">
            <div>
              <h3>主辦單位</h3>
              <p class="muted" style="font-weight:900" id="hostText">乾淨校園推廣團隊</p>

              <div style="height:10px"></div>
              <h3>協辦單位</h3>
              <p class="muted" style="font-weight:900" id="cohostText">彰南里活動中心</p>
            </div>

            <div>
              <h3>洽詢電話</h3>
              <p class="muted" style="font-weight:900; font-size:16px" id="phoneText">陳小姐｜0913-837-389</p>

              <div style="height:10px"></div>
              <h3>提醒</h3>
              <p class="muted" style="font-weight:800">若臨時無法到場，建議盡早通知，讓名額留給需要的家庭。</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap">
        <div class="card footCard">
          <div>
            <div style="font-weight:900; color:#0b1220">乾淨世界我愛我家兒童著色畫比賽官網</div>
            <div class="muted" style="font-weight:700">一頁式活動官網｜GitHub Pages 發佈</div>
          </div>
          <div class="muted">© <span id="year"></span></div>
        </div>
      </div>
    </footer>
  </main>

  <!-- 海報放大 Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="海報放大">
      <div class="modalTop">
        <div class="t">活動海報</div>
        <button class="iconBtn" id="closeModal" type="button">關閉</button>
      </div>
      <img class="modalImg" id="modalImg" src="assets/photo.png" alt="活動海報放大" />
    </div>
  </div>

  <script>
    // ====== 只要改這裡（必改）======
    // 1) GAS Web App URL（你的 Apps Script 部署網址 /exec）
    const GAS_WEBAPP_URL = "請貼上你的GAS部署網址";

    // 2) 感謝頁（同一個 repo 的檔案名）
    const THANKS_URL = "thanks.html";

    // 3) 活動代碼/名稱（會寫入試算表，方便你整理）
    const EVENT_CODE = "GJC2026";
    const EVENT_NAME = "乾淨世界我愛我家兒童著色畫比賽";

    // 4) 報名網址（可給家長分享；若你用這頁表單，就填這頁的公開網址）
    const PUBLIC_REGISTER_URL = "（填你的GitHub Pages網址）";
    // 5) Google 地圖「嵌入」網址（建議用：Google 地圖 → 分享 → 嵌入地圖 → 複製 src）
    //    貼上類似：https://www.google.com/maps/embed?pb=... 的整串
    const GOOGLE_MAP_EMBED_SRC = "https://www.google.com/maps?q=%E8%87%BA%E5%8D%97%E5%B8%82%E5%8D%97%E5%8D%80%E6%96%B0%E5%BB%BA%E8%B7%AF%2012%20%E8%99%9F%20%E5%BD%B0%E5%8D%97%E9%87%8C%E6%B4%BB%E5%8B%95%E4%B8%AD%E5%BF%83&output=embed";

    // =================================

    const EVENT = {
      siteName: "乾淨世界我愛我家兒童著色畫比賽官網",
      title: "乾淨世界「我愛我家」兒童著色畫比賽",
      kicker: "現場提供底圖｜11:40 公布並頒獎",
      subtitle: "一頁式活動官網：報名、流程、參加辦法（可展開）、獎項與地點。請確定能到再報名。",
      dateText: "2026/03/15（日）",
      timeText: "09:00–12:00",
      place: "彰南里活動中心｜大禮堂",
      address: "臺南市南區新建路 12 號",
      mapQuery: "臺南市南區新建路 12 號 彰南里活動中心",
      host: "乾淨校園推廣團隊",
      cohost: "彰南里活動中心",
      phone: "陳小姐｜0913-837-389"
    };

    const $ = (id) => document.getElementById(id);

    // 基本文字
    $("siteName").textContent = EVENT.siteName;
    $("title").textContent = EVENT.title;
    $("kicker").textContent = EVENT.kicker;
    $("subtitle").textContent = EVENT.subtitle;
    $("dateText").textContent = EVENT.dateText;
    $("timeText").textContent = EVENT.timeText;
    $("placeText").textContent = EVENT.place;
    $("placeFull").textContent = EVENT.place;
    $("addressText").textContent = EVENT.address;
    $("hostText").textContent = EVENT.host;
    $("cohostText").textContent = EVENT.cohost;
    $("phoneText").textContent = EVENT.phone;
    $("year").textContent = new Date().getFullYear();

    // 地圖
    const mapUrl = "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(EVENT.mapQuery);
    $("mapBtnTop").href = mapUrl;
    $("mapBtn2").href = mapUrl;
    const iframe = $("mapFrame");
    // 內嵌地圖：優先使用 GOOGLE_MAP_EMBED_SRC（最穩，手機也較不會被擋）
    const embed = (GOOGLE_MAP_EMBED_SRC || "").trim();
    if (embed && embed.startsWith("http")) {
      iframe.src = embed;
    } else {
      // 沒填 embed，就先隱藏內嵌框，避免手機顯示失敗
      iframe.parentElement.style.display = "none";
    }

    // 報名網址（可點 + 複製）
    const regUrlText = $("regUrlText");
    const copyLinkBtn = $("copyLinkBtn");
    function setPublicUrlUI(){
      const url = (PUBLIC_REGISTER_URL || "").trim();
      if (!url || url.includes("（") || url.includes("填")) {
        regUrlText.textContent = "（請先設定 PUBLIC_REGISTER_URL）";
        regUrlText.href = "#";
        copyLinkBtn.disabled = true;
        copyLinkBtn.textContent = "請先設定網址";
        return;
      }
      regUrlText.textContent = url;
      regUrlText.href = url;
      copyLinkBtn.disabled = false;
      copyLinkBtn.textContent = "複製報名網址";
    }
    setPublicUrlUI();

    copyLinkBtn.addEventListener("click", async () => {
      const url = (PUBLIC_REGISTER_URL || "").trim();
      if (!url || url === "#" || url.includes("（")) return;
      try{
        await navigator.clipboard.writeText(url);
        copyLinkBtn.textContent = "已複製 ✅";
        setTimeout(()=> copyLinkBtn.textContent = "複製報名網址", 1200);
      }catch(e){
        alert("複製失敗，請手動複製：\n" + url);
      }
    });

    // 複製地址
    $("copyAddrBtn").addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(EVENT.address);
        $("copyAddrBtn").textContent = "已複製 ✅";
        setTimeout(()=> $("copyAddrBtn").textContent = "複製地址", 1200);
      }catch(e){
        alert("複製失敗，請手動複製：\n" + EVENT.address);
      }
    });

    // 海報放大
    const modal = $("modal");
    const posterImg = $("posterImg");
    const modalImg = $("modalImg");
    const closeModal = $("closeModal");
    function openModal(){
      modal.classList.add("show");
      modal.setAttribute("aria-hidden","false");
    }
    function closeIt(){
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden","true");
    }
    posterImg.addEventListener("click", openModal);
    closeModal.addEventListener("click", closeIt);
    modal.addEventListener("click", (e)=>{ if(e.target === modal) closeIt(); });
    window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeIt(); });

    // 追蹤資訊（放進備註 hidden）
    function getTrackingNote(){
      const p = new URLSearchParams(location.search);
      const src = (p.get("src") || "").trim();
      const utm_source = (p.get("utm_source") || "").trim();
      const utm_medium = (p.get("utm_medium") || "").trim();
      const utm_campaign = (p.get("utm_campaign") || "").trim();
      const parts = [];
      if (src) parts.push(`src=${src}`);
      if (utm_source) parts.push(`utm_source=${utm_source}`);
      if (utm_medium) parts.push(`utm_medium=${utm_medium}`);
      if (utm_campaign) parts.push(`utm_campaign=${utm_campaign}`);
      return parts.length ? `【來源】${parts.join("&")}` : "";
    }

    function makeRegId(){
      // 簡單序號：年月日-4碼
      const d = new Date();
      const pad = (n)=> String(n).padStart(2,"0");
      const y = d.getFullYear();
      const m = pad(d.getMonth()+1);
      const day = pad(d.getDate());
      const rnd = Math.floor(Math.random()*9000)+1000;
      return `${y}${m}${day}-${rnd}`;
    }

    // 全程參與 UI
    const fullJoin = $("full_join");
    const fullJoinAlert = $("fullJoinAlert");
    const submitBtn = $("submitBtn");
    function setFullJoinUI(){
      const v = fullJoin.value || "";
      if (v.startsWith("否")) {
        fullJoinAlert.classList.add("show");
        submitBtn.disabled = true;
      } else {
        fullJoinAlert.classList.remove("show");
        submitBtn.disabled = false;
      }
    }
    fullJoin.addEventListener("change", setFullJoinUI);

    // 表單送出：改成「直接 POST 到 GAS」，GAS 寫入成功才會導回 thanks
    const form = $("signupForm");
    form.action = GAS_WEBAPP_URL;
    form.method = "POST";
    form.target = "_self";

    form.addEventListener("submit", (ev) => {
      // 擋「否」
      const v = fullJoin.value || "";
      if (v.startsWith("否")) {
        ev.preventDefault();
        setFullJoinUI();
        return;
      }

      // 簡單防連點
      if (form.dataset.submitting === "1") {
        ev.preventDefault();
        return;
      }
      form.dataset.submitting = "1";

      // UI
      $("submitHint").textContent = "正在送出…";
      $("progress").classList.add("show");
      submitBtn.disabled = true;
      submitBtn.textContent = "送出中…";

      // hidden：活動代碼/名稱
      $("event_code").value = EVENT_CODE;
      $("event_name").value = EVENT_NAME;

      // hidden：序號
      if (!$("reg_id").value) $("reg_id").value = makeRegId();
      const rid = $("reg_id").value;

      // hidden：追蹤（合併家長備註）
      const tracking = getTrackingNote();
      const note = ($("note").value || "").trim();
      const merged = [note, tracking].filter(Boolean).join(" | ");
      $("note_hidden").value = merged;

      // redirect：寫入成功後導回 thanks（帶 rid）
      const thanksAbs = new URL(THANKS_URL, location.href).href;
      $("redirect_url").value = `${thanksAbs}?rid=${encodeURIComponent(rid)}`;
      // 不要 preventDefault：讓瀏覽器把表單送到 GAS
    });
  </script>
</body>
</html>
