<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>報名完成｜感謝你</title>
  <meta name="theme-color" content="#fb7185" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Pixel（可選）：用 localStorage 讀取，這樣你只要在 index.html 設一次 -->
  <script>
    (function(){
      const PIXEL_ID = localStorage.getItem("PIXEL_ID") || "";
      if(!PIXEL_ID) return;
      !function(f,b,e,v,n,t,s){
        if(f.fbq)return; n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n; n.push=n; n.loaded=!0; n.version='2.0';
        n.queue=[]; t=b.createElement(e); t.async=!0;
        t.src=v; s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)
      }(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', PIXEL_ID);
      fbq('track', 'PageView');
      fbq('track', 'CompleteRegistration');
    })();
  </script>
</head>

<body class="bg-amber-50 text-slate-900">
  <div class="mx-auto max-w-xl px-4 py-14">
    <div class="rounded-2xl bg-white p-8 shadow-sm ring-1 ring-slate-200 text-center">
      <div class="mx-auto mb-4 grid h-12 w-12 place-items-center rounded-full bg-emerald-50 ring-1 ring-emerald-200">
        <span class="text-emerald-700 text-xl font-black">✓</span>
      </div>

      <h1 class="text-2xl font-bold">報名完成</h1>
      <p class="mt-3 text-slate-600">已收到你的資料，請留意活動前 3–5 天來電確認。</p>

      <div class="mt-5 rounded-xl bg-slate-50 p-4 ring-1 ring-slate-200 text-left">
        <div class="text-xs font-semibold text-slate-500">報名序號</div>
        <div class="mt-1 font-mono text-lg font-bold" id="rid">（載入中）</div>
        <div class="mt-2 text-xs text-slate-500">若需查詢或更正，可提供此序號給工作人員。</div>
      </div>

      <div class="mt-6 grid gap-3 sm:grid-cols-2">
        <a href="/" class="inline-flex items-center justify-center rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white hover:bg-slate-800">
          繼續報名
        </a>

        <button id="closeBtn" type="button"
          class="inline-flex items-center justify-center rounded-xl bg-white px-4 py-3 text-sm font-semibold text-slate-900 ring-1 ring-slate-200 hover:bg-slate-50">
          結束本頁
        </button>
      </div>

      <p class="mt-4 text-xs text-slate-500" id="closeHint"></p>
    </div>
  </div>

  <script>
    const p = new URLSearchParams(location.search);
    const rid = p.get("rid") || "";
    document.getElementById("rid").textContent = rid ? rid : "（無）";

    document.getElementById("closeBtn").addEventListener("click", ()=>{
      // 有些手機瀏覽器不允許關閉分頁（不是你做錯）
      window.close();
      setTimeout(()=>{
        document.getElementById("closeHint").textContent =
          "若無法自動關閉：請用瀏覽器右上角「X」或返回鍵離開即可。";
      }, 300);
    });
  </script>
</body>
</html>
